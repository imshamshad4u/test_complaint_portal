{% extends 'base.html'%}
{% load static %}
{% block content%}
<!-- <!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %} Complaint |Portal {% endblock %}</title> -->

<!-- <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.css" /> -->

<!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"> -->
<!-- <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css"> -->

<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.js"></script> -->

<!-- <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" /> -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0-alpha3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css"> -->
<!-- <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="{% static 'css/styles.css'%}">

 -->

<!-- <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.js"></script> -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/> -->


<!-- <style>
        body {
            font-family: "Lato", sans-serif;
        }

        .sidenav {
            height: 100%;
            width: 0;
            position: fixed;
            z-index: 1;
            top: 0;
            left: 0;
            background-color: rgb(6, 62, 101);
            overflow-x: hidden;
            transition: 0.5s;
            padding-top: auto;
        }

        .loggedin-link .a {
            margin-bottom: 10px;
            text-align: left;
            font-size: 15px;
        }

        .sidenav a {
            margin-top: 2px;
            padding: 8px 8px 8px 32px;
            text-decoration: none;
            font-size: 25px;
            color: #818181;
            display: block;
            transition: 0.3s;
        }

        .sidenav a:hover {
            color: #f1f1f1;
        }

        .sidenav .closebtn {
            position: absolute;
            top: 0;
            right: 25px;
            font-size: 36px;
            margin-left: 50px;
        }

        #main {
            transition: margin-left .5s;

        }



        @media screen and (max-height: 450px) {
            .sidenav {
                padding-top: 15px;
            }

            .sidenav a {
                font-size: 18px;
            }
        }
    </style>
</head>

<body>
    <div id="mySidenav" class="sidenav">
        <img class="img-fluid" style="width: 100%;height: 73px;" src="{% static 'images/rentokil.jpg'%}" alt="">
        <a href="#" class="fs-6"  data-bs-toggle="collapse" data-bs-target="#collapseLayouts"
        aria-expanded="false" aria-controls="collapseLayouts"id="logged_in_user"> <i class="fa-solid fa-user"></i> Welcome,<div>{{request.user}}
            </div></a>

        <a href="#" class="fs-6"><i class="fa-solid fa-gauge"></i> Dashboard</a>
        <a href="{%url 'All_complaints'%}" class="fs-6" id="All_complaints"> <i class="fa-solid fa-face-frown"></i> View
            All Complaint</a>

        <div style="position: absolute; bottom:0px; left:0px">
            <span style="color: rgba(255, 255, 255, 0.918); ">Logged in as:</span> <a href="#"
                class="fs-6">{{ request.user.email }}</a>
        </div> -->
<!-- <p id="All_complaints">View All Complaint</p> -->

<!-- <a href="{% url 'OE_login'%}">Login</a> -->

<!-- </div> -->

<!-- <div id="main">
        <nav class=" sb-sb-topnav navbar  " style="background-color: rgb(6, 62, 101);">
            <div class="menu-toggle-btn mr-10"> -->
<!-- <button id="menu-toggle" class="main-btn primary-btn btn-hover" onclick="toggleNav()">
                    <i class="lni lni-chevron-left me-2"></i> Menu
                </button> -->

<!-- <span class="fs-6 navbar-brand" style="font-size:30px;cursor:pointer;color: aliceblue;"
                    onclick="toggleNav()">&#9776;
                    Menu</span> -->

<!-- </div>
            <h6 class="text-center navbar-brand " style="color: aliceblue;">Complaint |Portal <span><img
                        style="width: 60px;height:40px;" src="{% static 'images/complain.jpg'%}" alt=">>>"></span></h6> -->

<!-- <a class="navbar-brand fs-6" href="#"> -->
<!-- <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
                    aria-expanded="false">
                    <i class="fa-solid fa-user d-inline-block" alt=""> </i>
                    {{user}}
                </button>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="/logout/"> Sign Out</a></li>
                </ul>
            </div> -->


<!-- </a> -->

<!-- </nav> -->
<!-- {% if status %}
        {% block status %}

        {% endblock %}
        {% else  %} -->
<!-- <div class="container-fluid">
           
        </div> -->


<!-- {%endif %} -->

<!-- </div> -->


<!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> -->
<!-- <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script src="https://kit.fontawesome.com/7f3164e337.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> -->


<!-- <script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{% static 'Js/OE_dashboard.js'%}"></script>




</body>

</html> -->

<!-- ################################## -->




{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="Shamshad Alam" content="Complaint App for Customer and  Operation Executive" />
    <title>Complaint | Portal</title>
    <!-- <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" /> -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> -->
    <link href="{% static 'css/styles.css' %}" rel="stylesheet" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
</head>

<body class="sb-nav-fixed">
    <nav class="sb-topnav navbar navbar-expand  scroll-grey" style="background-color: rgb(52, 94, 131) ;">
        <!-- Navbar Brand-->
        <a class="navbar-brand  pt-2 text-md-center" href="/">
            <img src="{% static 'images/rentokil-new.png' %}" alt="rentokil-logo" class='img-fluid'>
        </a>
        <!-- Sidebar Toggle-->
        <button class="btn btn-link btn-lg order-1 order-lg-0  me-lg-0" id="sidebarToggle" href="#!">
            <i class="fas fa-bars"></i>
        </button>
        <!-- Navbar Search-->
        <h6 class="text-center navbar-brand " style="color: aliceblue;">Complaint |Portal <span><img
                    style="width: 60px;height:40px;" src="{% static 'images/complain.jpg'%}" alt=">>>"></span></h6>




        {% if user.is_authenticated %}
        <ul class="navbar-nav ms-auto me-3 me-lg-4">

            <li class="nav-item dropdown">

                <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown"
                    aria-expanded="false">
                    <i class="fas fa-user fa-fw"></i>
                    <span class="d-none d-lg-inline" style="color: aliceblue;">{{ request.user.username }}</span>
                    <span class="d-lg-none">{{ request.user.username | truncatechars:12 }}</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                    <li><a class="dropdown-item" href="/logout">Logout</a></li>
                </ul>
            </li>
        </ul>
        {% else %}
        <ul class="navbar-nav ms-auto me-3 me-lg-4">
            <li class="nav-item dropdown">
                <a class="nav-link text-white" id="navbarDropdown" href="{% url 'login_user' %}" role="button"
                    aria-expanded="false">
                    <i class="fas fa-user fa-fw"></i>
                    <span class="d-none d-lg-inline">Login</span>
                    <span class="d-lg-none">Login</span>
                </a>

            </li>
        </ul>

        {% endif %}

    </nav>
    {% if request.user.is_staff%}
    <!-- if my user is staff then show this dashboard else  -->
    <div id="layoutSidenav">
        <div id="layoutSidenav_nav">
            <nav class="sb-sidenav" id="sidenavAccordion" style="background-color: rgb(38, 77, 111);">
                <div class="sb-sidenav-menu">
                    <div class="nav" style="color: aliceblue;">

                        <div class="sb-sidenav-menu-heading">Complaint Portal</div>

                        <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#collapseDashboard"
                            aria-expanded="false" aria-controls="collapseDashboard">
                            <div class="sb-nav-link-icon "><i class="fa-solid fa-gauge"></i></div>
                            <div class="fw-bold" style="color: aliceblue;">Dashboard</div>
                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                        </a>
                        <div class="collapse" id="collapseDashboard" aria-labelledby="headingDashboard"
                            data-bs-parent="#sidenavAccordion">
                            <nav class="sb-sidenav-menu-nested nav">
                                <a class="nav-link" href="{% url 'OE_login'%}" style="color: aliceblue;">
                                    <div class="sb-nav-link-icon" style="color: aliceblue;"><i
                                            class="fa-brands fa-wpforms"></i></div>
                                    Home
                                </a>
                            </nav>
                        </div>


                        <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#collapseComplaint"
                            aria-expanded="false" aria-controls="collapseComplaint">
                            <div class="sb-nav-link-icon"><i class="fa-regular fa-id-card"></i></div>
                            <div class="fw-bold" style="color: aliceblue;">Complaint Request</div>
                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                        </a>

                        <div class="collapse" id="collapseComplaint" aria-labelledby="headingComplaint"
                            data-bs-parent="#sidenavAccordion">
                            <nav class="sb-sidenav-menu-nested nav">
                                <a class="nav-link" href="{% url 'All_complaints'  %}" style="color: aliceblue;">
                                    <div class="sb-nav-link-icon" style="color: aliceblue;"><i
                                            class="fa-brands fa-wpforms"></i></div>
                                    List All Complaints
                                </a>
                            </nav>
                        </div>

                        <div class="sb-sidenav-menu-heading" style="color: aliceblue;">Profile</div>

                        <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#collapseAccount"
                            aria-expanded="false" aria-controls="collapseAccount">
                            <div class="sb-nav-link-icon"><i class="fa-regular fa-id-card"></i></div>
                            <div class="fw-bold" style="color: aliceblue;">Account</div>
                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                        </a>

                        <div class="collapse" id="collapseAccount" aria-labelledby="headingAccount"
                            data-bs-parent="#sidenavAccordion">
                            <nav class="sb-sidenav-menu-nested nav">
                                <a class="nav-link" href="" style="color: aliceblue;">
                                    <div class="sb-nav-link-icon"><i class="fa-solid fa-user"></i></div>
                                    My Profile
                                </a>
                                <a class="nav-link" href="" style="color: aliceblue;">
                                    <div class="sb-nav-link-icon"><i class="fa-solid fa-arrow-rotate-right"></i></div>
                                    My History
                                </a>
                            </nav>
                        </div>

                    </div>
                </div>
                <div class="sb-sidenav-footer" style="color: aliceblue;">
                    <div class="small">Logged in as:</div>
                    {{ request.user.email }}
                </div>
            </nav>
        </div>

        <div id="layoutSidenav_content">
            <main>
                <div class="container">
                    {% block all_complaint_table %}
                    <!-- Content of the apps... -->
                    {% endblock %}
                </div>
            </main>
        </div>
    </div>


    {% else %}
    <div id="layoutSidenav">
        <div id="layoutSidenav_nav">
            <nav class="sb-sidenav accordion" id="sidenavAccordion" style="background-color: rgb(38, 77, 111);">
                <div class="sb-sidenav-menu">
                    <div class="nav" style="color: aliceblue;">


                        <div class="sb-sidenav-menu-heading">Complaint Portal</div>

                        <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#collapseDashboard"
                            aria-expanded="false" aria-controls="collapseDashboard">
                            <div class="sb-nav-link-icon "><i class="fa-solid fa-gauge"></i></div>
                            <div class="fw-bold" style="color: aliceblue;">Dashboard</div>
                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                        </a>
                        <div class="collapse" id="collapseDashboard" aria-labelledby="headingDashboard"
                            data-bs-parent="#sidenavAccordion">
                            <nav class="sb-sidenav-menu-nested nav">
                                <a class="nav-link" href="{% url 'login_user'%}" style="color: aliceblue;">
                                    <div class="sb-nav-link-icon" style="color: aliceblue;"><i
                                            class="fa-brands fa-wpforms"></i></div>
                                    Home
                                </a>
                            </nav>
                        </div>

                        <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#collapseComplaint"
                        aria-expanded="false" aria-controls="collapseComplaint">
                        <div class="sb-nav-link-icon"><i class="fa-regular fa-id-card"></i></div>
                        <div class="fw-bold" style="color: aliceblue;">Complaint Request</div>
                        <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                    </a>

                    <div class="collapse" id="collapseComplaint" aria-labelledby="headingComplaint"
                        data-bs-parent="#sidenavAccordion">
                        <nav class="sb-sidenav-menu-nested nav">
                            <a class="nav-link" href="{% url 'complain_form'%}" style="color: aliceblue;">
                                <div class="sb-nav-link-icon" style="color: aliceblue;"><i
                                        class="fa-brands fa-wpforms"></i></div>
                                        Raise Complaint Form
                            </a>
                        </nav>
                    </div>
                       

                        <div class="sb-sidenav-menu-heading" style="color: aliceblue;">Profile</div>

                        <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#collapseAccount"
                            aria-expanded="false" aria-controls="collapseAccount">
                            <div class="sb-nav-link-icon"><i class="fa-regular fa-id-card"></i></div>
                            <div class="fw-bold" style="color: aliceblue;">Account</div>
                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                        </a>

                        <div class="collapse" id="collapseAccount" aria-labelledby="headingAccount"
                            data-bs-parent="#sidenavAccordion">
                            <nav class="sb-sidenav-menu-nested nav">
                                <a class="nav-link" href="" style="color: aliceblue;">
                                    <div class="sb-nav-link-icon"><i class="fa-solid fa-user"></i></div>
                                    My Profile
                                </a>
                                <a class="nav-link" href="{% url 'customer_history' request.user.id %}"style="color: aliceblue;">
                                    <div class="sb-nav-link-icon"><i class="fa-solid fa-arrow-rotate-right"></i></div>
                                    My History
                                </a>
                            </nav>
                        </div>
                    </div>
                </div>
                <div class="sb-sidenav-footer" style="color: aliceblue;">
                    <div class="small">Logged in as:</div>
                    {{ request.user.email }}
                </div>
            </nav>
        </div>

        <div id="layoutSidenav_content">
            <main>
                <div class="container">
                    {% block complain_form %}

                    <!-- Content of the apps... -->
                    {% endblock %}
                    {% block all_complaint_by_user %}

                    {% endblock %}
                    
                    {% block view_logs %}
                    {% endblock %}
                </div>
            </main>
        </div>

    </div>
    {% endif %}
    <!-- table cdn -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script> -->
    <!-- js Datatable method -->
    <!-- <script src="{% static 'js/scripts.js' %}"></script> -->
    <!-- table cdn -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js"
        crossorigin="anonymous"></script> -->
    <!-- js Datatable method -->
    <!-- <script src="{% static 'js/datatables-simple-demo.js' %}"></script> -->

    <!-- </body> -->

    <!-- </html> -->
    <!-- <script>
        window.onload = function () {
            const sidebar = document.querySelector(".sidebar");
            const closeBtn = document.querySelector("#btn");
            const searchBtn = document.querySelector(".bx-search")

            closeBtn.addEventListener("click", function () {
                sidebar.classList.toggle("open")
                menuBtnChange()
            })

            searchBtn.addEventListener("click", function () {
                sidebar.classList.toggle("open")
                menuBtnChange()
            })

            function menuBtnChange() {
                if (sidebar.classList.contains("open")) {
                    closeBtn.classList.replace("bx-menu", "bx-menu-alt-right")
                } else {
                    closeBtn.classList.replace("bx-menu-alt-right", "bx-menu")
                }
            }
        } -->
    <script src="{% static 'Js/OE_dashboard.js'%}"></script>
    <script>
        window.addEventListener('DOMContentLoaded', event => {

            // Toggle the side navigation
            const sidebarToggle = document.body.querySelector('#sidebarToggle');
            if (sidebarToggle) {
                // Uncomment Below to persist sidebar toggle between refreshes
                // if (localStorage.getItem('sb|sidebar-toggle') === 'true') {
                //     document.body.classList.toggle('sb-sidenav-toggled');
                // }
                sidebarToggle.addEventListener('click', event => {
                    event.preventDefault();
                    document.body.classList.toggle('sb-sidenav-toggled');
                    localStorage.setItem('sb|sidebar-toggle', document.body.classList.contains('sb-sidenav-toggled'));
                });
            }

        });
    </script>
</body>

</html>
{% endblock %}